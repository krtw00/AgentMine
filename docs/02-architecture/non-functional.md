---
depends_on:
  - ./principles.md
  - ./structure.md
  - ../03-details/daemon.md
  - ../03-details/event-stream.md
  - ../03-details/log-storage.md
tags: [architecture, nfr, quality-attributes]
ai_summary: "MVPの非機能要件（セキュリティ/信頼性/性能/運用性/保守性/移植性）を定義"
---

# 非機能要件

> Status: Draft
> 最終更新: 2026-02-01

本ドキュメントは、AgentMineのMVPにおける非機能要件を定義する。
本プロジェクトは「ローカル一人運用」を前提とし、ネットワーク越しのマルチユーザー利用は対象外とする。

---

## 前提

| 項目     | 前提                                     |
| -------- | ---------------------------------------- |
| 実行環境 | 開発者PC（macOS/Linux想定）              |
| 起動形態 | localhost常駐のLocal Daemon + ブラウザUI |
| 状態管理 | DBがSSoT（状態の正）である               |
| 監査     | run/checkの出力はログとして保存する      |

---

## セキュリティ・プライバシー

|       # | 要件                   | 具体                                           |
| ------: | ---------------------- | ---------------------------------------------- |
| NFR-001 | ローカル限定公開       | Daemonはlocalhostにのみバインドする            |
| NFR-002 | 単一インスタンス       | 同一ユーザー環境で多重起動できない             |
| NFR-003 | 最小権限で実行         | root権限を前提にしない                         |
| NFR-004 | 秘密情報を永続化しない | APIキー等の秘密はDB/ログに保存しない           |
| NFR-005 | UI/API同一オリジン     | 異なるオリジン間通信を前提にしない（CORS不要） |

注:

- 本MVPは「同一PCの同一ユーザー」を信頼境界とする。完全な防御境界は提供しない。

---

## 信頼性・整合性

|       # | 要件                 | 具体                                                 |
| ------: | -------------------- | ---------------------------------------------------- |
| NFR-010 | DB整合性             | 状態更新はDBトランザクションで一貫性を担保する       |
| NFR-011 | 再起動時の復元       | 再起動後、実行中runの整合処理を行う                  |
| NFR-012 | 監査可能性           | runの入出力は追跡可能な形で保存される                |
| NFR-013 | イベントは再構築可能 | UIの一時切断があってもDBから状態を再構築できる       |
| NFR-014 | 失敗時の可観測性     | 失敗（起動失敗/停止/異常終了）は理由付きで観測できる |

---

## 性能・スケーラビリティ

|       # | 要件           | 具体                                          |
| ------: | -------------- | --------------------------------------------- |
| NFR-020 | UI操作の応答性 | 通常操作が体感的に遅延しない                  |
| NFR-021 | ログの逐次配信 | 実行中の出力をほぼリアルタイムに閲覧できる    |
| NFR-022 | 大量ログ耐性   | 長時間runでも閲覧が破綻しない（ページング等） |
| NFR-023 | 多タスク運用   | タスク/Runが増えても一覧表示が破綻しない      |

---

## 運用性・保守性

|       # | 要件             | 具体                                         |
| ------: | ---------------- | -------------------------------------------- |
| NFR-030 | 明確な起動/停止  | Daemonは停止/再起動が容易である              |
| NFR-031 | バックアップ容易 | DBとログをコピーするだけでバックアップできる |
| NFR-032 | ログの整理       | ログは明示操作で削除できる                   |
| NFR-033 | 交換可能なRunner | runnerの差はRunnerAdapterで吸収する          |

---

## 移植性

|       # | 要件             | 具体                                                 |
| ------: | ---------------- | ---------------------------------------------------- |
| NFR-040 | 主要OS対応       | MVPはmacOS/Linuxを対象とする                         |
| NFR-041 | パス前提の明文化 | ファイル配置（AgentMine Home等）を仕様として固定する |

---

## 関連ドキュメント

- [設計原則](./principles.md) - DB正、観測可能な事実、再現性優先
- [主要コンポーネント構成](./structure.md) - Daemon/UI/Runnerの分離
- [Local Daemon](../03-details/daemon.md) - 単一インスタンスと整合処理
- [イベント配信](../03-details/event-stream.md) - SSE
- [ログ保存](../03-details/log-storage.md) - ログの保持と参照
